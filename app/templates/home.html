{% extends 'base.html'%}

{% block content %}

<main class="d-flex flex-column gap-5">
    <div class="row align-items-center">
          <form method="GET" action="{% url 'home' %}" class="d-flex flex-column align-items-center gap-2">
              {% csrf_token %}
              <h2>Buscar Candidato</h2>
              <div class="mb-3">
                  <p> {{ form.fullname }}</p>
              </div>
              <div class="text-center">
                  <button type="submit" class="btn btn-primary text-white">Buscar</button>
                  <a href="{% url 'home' %}" class="btn btn-primary text-white">Mostrar Todos</a>                  
              </div>
          </form>
    </div>

    <div class="container-lg">
    <h2 class="h2">Lista de Candidatos</h2>
{% if candidatos %}
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Nome</th>
                <th>CPF</th>
                <th>Status</th>
                <th>Detalhes</th>
            </tr>
        </thead>
        <tbody>
            {% for candidato in candidatos %}
                <tr>
                    <td>{{ candidato.name }}</td>
                    <td>{{ candidato.cpf }}</td>
                    {% if candidato.status == 'encontrado' %}
                        <td class="fw-bold text-success">{{ candidato.get_status_display }}</td>
                    {% else %}
                        <td class="fw-bold text-info">{{ candidato.get_status_display }}</td>
                    {% endif %}
                    <td>
                        <a href="{% url 'candidato_detail' candidato.pk %}" class="btn btn-info">Ver Detalhes</a>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>Nenhum candidato encontrado.</p>
{% endif %}
</div>
</main>


{% endblock %}
